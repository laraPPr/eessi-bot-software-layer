This file contains a description of the major changes to the EESSI
build-and-deploy bot. For more detailed information, please see the git log.

v0.5.0 (16 May 2024)
--------------------------

This is a minor release of the EESSI build-and-deploy bot.

Improvements:
* list authors in source code files where applicable (#261)
* make display of build targets more concise (#262)
* use _bot_jobJOBID.result files created by bot/check-build.sh when determining
  which build artefacts should be deployed (#263)
  * this makes the bot fully agnostic to what it builds
* reorganise declaration, initialisation and use of string constants _and_ verify
* that required configuration settings are defined in 'app.cfg' (#266)


v0.4.0 (28 February 2024)
--------------------------

This is a minor release of the EESSI build-and-deploy bot.

Bug fixes:
* fixes issue using wrong values when using the `bot: status` command (#251)

Improvements:
* make bot report when preparing the job working directory failed, for example due to merge conflict in a pull request (#248)
* adding the pull request comment id to the metadata file that is uploaded to the
  the S3 bucket (#247, #249, #250, #253)
* enabling configurable upload directories for tarball and metadata file (#254)
* only make bot respond to pull request comments that contain a bot command (#257)


v0.3.0 (30 January 2024)
--------------------------

This is a minor release of the EESSI build-and-deploy bot.

Bug fixes:
* refreshes the token to access GitHub well before it expires (#238)

Improvements:
* adds a new bot command 'status' which provides an overview (table) of all
  finished builds (#237)


v0.2.0 (26 November 2023)
--------------------------

This is a minor release of the EESSI build-and-deploy bot.

Bug fixes:
* adds information on installing and using the smee client on `aarch64` (#233)

Improvements:
* support for running tests inside the same job but after the build step (#222)
  * runs `bot/test.sh` and `bot/check-test.sh` if these are provided in the GitHub repository
  * adds a new setting (`job_test_unknown_fmt`) in the bot's configuration file
* ensure the bot can build for both the EESSI pilot repository (`pilot.eessi-hpc.org`) and `software.eessi.io` (#229)
* support specifying repository-specific buckets via `bucket_name` in configuration file (#230)


v0.1.1 (14 November 2023)
--------------------------

This is a patch release of the EESSI build-and-deploy bot.

Bug fixes:
* omit header in output of `squeue` command run by the job manager (#220)
* make bot compatible with more recent versions of PyGithub (#224)

Improvements:
* added a script to help reducing disk usage by cleaning up tarballs stored by jobs (#217)
* clarified documentation about setting permissions and event subscriptions for the bot (#221)


v0.1.0 (29 September 2023)
--------------------------

This is the first release of the EESSI build-and-deploy bot, which consists of
an event handler (implemented as a GitHub app, see https://docs.github.com/en/apps),
and a job manager component (implemented as Python script).

It provides support for:

* building software via jobs submitted to a Slurm cluster;
* building software for a GitHub repository that includes a `bot/build.sh` and `bot/check-build.sh` script;
* acting on certain GitHub events:
  * opening of pull requests;
  * pull request comment being posted that include bot commands (like `help`, `build`, `show_config`);
  * labeling of pull requests;
* status updates of build jobs via pull request comments;
* access control for sending commands, submitting build jobs, triggering deploys via GitHub accounts;
* uploading of tarballs with built software artefacts to an S3 bucket;
* wide range of configuration settings to run the bot in different Slurm-based environments;

Multiple bot instances can be run in parallel for a single GitHub repository.

For documentation, see:
* high-level overview of the bot: https://www.eessi.io/docs/bot
* instructions for installing and configuring the bot: https://github.com/EESSI/eessi-bot-software-layer/blob/v0.1.0/README.md
* how to use the bot to add software to EESSI: https://www.eessi.io/docs/software_layer/adding_software
